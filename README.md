# GISRaster

## How to run
clone the repo and run using python

```
python raster.py
```

## General Summary
Running raster.py will download the example data to your working directory and generate two plots side by side.
The left is the sample altitude profile and the right is the DEM tile plot with the altitude profile cut.

Resulting altitude profile:

![](https://github.com/nschwei/GISRaster/blob/main/plots/Altitude_profile_smooth_window.png?raw=true)

Resulting Map:

![](https://github.com/nschwei/GISRaster/blob/main/plots/Image_with_line.png?raw=true)

## Function Explanations

 ### download_tiff
 This function downloads the DEM tile zip file and extracts the contents to the working directory.
 The default url is for srtm_65_04. Any other valid url for another region could be passed to this function.

 ### open_tif
 This is another simple function that uses rasterio to take in an input .tif file extracted from the previous download and open grab band(1) (for the case of this example there is only 1 band present).
 All the flagged values (with the value -32768) are set to 0 in this function as well.
 This function will return the resulting selected band.

 ### plot_image
 This generates a plot containing two subplots: the plots generated above (altitude profile and DEM tile plot with the slice used in the profile).
 It takes in the band generated from open_tif, the line generated from line_altitudes, the smoothed altitudes also from line altitudes, and the line's start and end points.

 ### line_altitudes
 This function takes the band from open_tif and the line's start and end points.
 From these, the points from the band array that lie on the line fill the resulting line array. These are the heights of every point on the line.
 A smoothed array of heights is then generated by setting a smooth window and taking a simple mean of the window contents as it scans across the raw heights array.
 Here the window size is arbitrarily set to enforce the end smoothed array contains 100 points. When expanding on this it would make sense to expose this window as a parameter to be controlled.
 Other smoothing methods could also be used. Not explored here is using a 1d gaussian smooth or other interpolation methods. This was used since it yielded close results to the example with the same size (although it is not a perfect replication).
 
